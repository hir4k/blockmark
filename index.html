<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body>
    <div class="p-4">
        <div id="editor"></div>
    </div>

    <div class="test-buttons">
        <button onclick="saveEditor()">Save Editor</button>
        <button onclick="loadEditor()">Load Sample Data</button>
    </div>

    <div id="resultDisplay" class="result-display hidden">
        <h3>Saved Data (JSON Format)</h3>
        <pre id="resultData"></pre>
    </div>

    <script src="./src/index.js" type="module"></script>
    <script>
        function saveEditor() {
            const data = window.blockmarkEditor.save();
            const resultDisplay = document.getElementById('resultDisplay');
            const resultData = document.getElementById('resultData');

            // Format the JSON with proper indentation
            const formattedData = JSON.stringify(data, null, 2);
            resultData.textContent = formattedData;

            // Show the result display
            resultDisplay.classList.remove('hidden');

            // Scroll to the result
            resultDisplay.scrollIntoView({ behavior: 'smooth' });
        }

        function loadEditor() {
            const sampleData = [
                {
                    "type": "paragraph",
                    "text": [
                        { "text": "Hello " },
                        { "text": "World", "bold": true }
                    ]
                },
                {
                    "type": "list",
                    "ordered": false,
                    "items": [
                        [{ "text": "Apple" }],
                        [{ "text": "Banana", "italic": true }],
                        [{ "text": "Orange" }]
                    ]
                },
                {
                    "type": "paragraph",
                    "text": [
                        { "text": "This is a " },
                        { "text": "test", "underline": true },
                        { "text": " paragraph." }
                    ]
                }
            ];

            window.blockmarkEditor.load(sampleData);

            // Hide the result display when loading new data
            document.getElementById('resultDisplay').classList.add('hidden');

            alert('Sample data loaded!');
        }
    </script>
</body>

</html>